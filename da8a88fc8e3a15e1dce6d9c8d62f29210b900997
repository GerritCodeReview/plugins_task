{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "23b0e997_460f1d39",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/RelativeSubTask.java",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 1010013
      },
      "writtenOn": "2023-12-19T02:11:16Z",
      "side": 1,
      "message": "Since this should never be used as a key, it might not make sense to use an AutoValue for this.",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9cd63c6b_c5dd2471",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/RelativeSubTask.java",
        "patchSetId": 10
      },
      "lineNbr": 21,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2024-01-04T14:53:46Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "23b0e997_460f1d39",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a5d8bd92_588af6ee",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/RelativeSubTask.java",
        "patchSetId": 10
      },
      "lineNbr": 25,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-12-14T18:27:22Z",
      "side": 1,
      "message": "s/subTask/value/\n\n```suggestion\n  public static RelativeSubTask create(FileKey file, String value) {\n    return new AutoValue_RelativeSubTask(file, value);\n```",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 25,
        "endChar": 56
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9d42cddb_60b44a27",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/RelativeSubTask.java",
        "patchSetId": 10
      },
      "lineNbr": 25,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-12-18T14:01:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "a5d8bd92_588af6ee",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 25,
        "endChar": 56
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a8148ce7_246801cb",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/RelativeSubTask.java",
        "patchSetId": 10
      },
      "lineNbr": 28,
      "author": {
        "id": 1010013
      },
      "writtenOn": "2023-12-19T02:11:16Z",
      "side": 1,
      "message": "I think that \"file\" here is too vague, in this case, it is the file that the \"value\" was referenced from, but no necessarily the file the reference task is in. Perhaps fromFile, or sourceFile?",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b2a5c19a_1cba308f",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/RelativeSubTask.java",
        "patchSetId": 10
      },
      "lineNbr": 28,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2024-01-04T14:53:46Z",
      "side": 1,
      "message": "sourceFile sounds better, considering the class SourceSubTask. Done.",
      "parentUuid": "a8148ce7_246801cb",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1fe1787_2f568619",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/TaskConfig.java",
        "patchSetId": 10
      },
      "lineNbr": 67,
      "author": {
        "id": 1010013
      },
      "writtenOn": "2023-12-19T02:11:16Z",
      "side": 1,
      "message": "\"Relative\" seems inappropriate since I believe this can also reference absolute subtasks in other files?",
      "range": {
        "startLine": 67,
        "startChar": 16,
        "endLine": 67,
        "endChar": 31
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "425a621d_935ddbc3",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/TaskConfig.java",
        "patchSetId": 10
      },
      "lineNbr": 67,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2024-01-04T14:53:46Z",
      "side": 1,
      "message": "Right, How about SourceSubTask? Updated in the latest PS.",
      "parentUuid": "c1fe1787_2f568619",
      "range": {
        "startLine": 67,
        "startChar": 16,
        "endLine": 67,
        "endChar": 31
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6f41721a_e128bca5",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 43,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-12-14T18:27:22Z",
      "side": 1,
      "message": "```suggestion\n  public interface UnexpandedStringProvider {\n```",
      "range": {
        "startLine": 43,
        "startChar": 19,
        "endLine": 43,
        "endChar": 43
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ee9ca41d_f2c818d1",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 43,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-12-15T03:40:25Z",
      "side": 1,
      "message": "Sry, I thought I did change this. Seems like it happen to come back when I was reverting this original change.",
      "parentUuid": "6f41721a_e128bca5",
      "range": {
        "startLine": 43,
        "startChar": 19,
        "endLine": 43,
        "endChar": 43
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bab81e69_7518906c",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 43,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-12-18T14:01:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "ee9ca41d_f2c818d1",
      "range": {
        "startLine": 43,
        "startChar": 19,
        "endLine": 43,
        "endChar": 43
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f47ef316_06f70285",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 121,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-12-14T18:27:22Z",
      "side": 1,
      "message": "Should this also check `instanceof InstanceWithExpandedStringProvider`?\n```suggestion\n          Object first \u003d list.get(0);\n          if (first instanceof String ||\n            (first instanceof UnexpandedStringProvider \u0026\u0026 first instanceof InstanceWithExpandedStringProvider)) {\n```\n\n\nHowever, maybe this should be happening in your `expand(List\u003cT\u003e list)` instead. That seems the appropriate place for list-specific checks. And that might lead to an improvement for the duplicate checking behavior I comment on below.",
      "range": {
        "startLine": 121,
        "startChar": 47,
        "endLine": 121,
        "endChar": 94
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2c988c1f_6cbf42b4",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 121,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-12-18T14:01:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "f47ef316_06f70285",
      "range": {
        "startLine": 121,
        "startChar": 47,
        "endLine": 121,
        "endChar": 94
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "adc901bc_367e9248",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 161,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-12-14T18:27:22Z",
      "side": 1,
      "message": "nit: this can probably be protected? Likely the same for the existing methods below, but those can be fixed separately.",
      "range": {
        "startLine": 161,
        "startChar": 2,
        "endLine": 161,
        "endChar": 8
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5eed0c14_82595468",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 161,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-12-18T14:01:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "adc901bc_367e9248",
      "range": {
        "startLine": 161,
        "startChar": 2,
        "endLine": 161,
        "endChar": 8
      },
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "260a23e3_6e1ff887",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 163,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-12-14T18:27:22Z",
      "side": 1,
      "message": "It seems a little silly to repeat these `instanceof` checks for every item in the list. Won\u0027t all items in the list have the same result?",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d0d39802_80dbbfff",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 163,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-12-14T20:26:39Z",
      "side": 1,
      "message": "Also, if you wanted to look at using annotations to solve this instead, I think it would be something like:\n\nchange the interfaces above into annotations:\n```\n  /** Returns a string which needs to be expanded */\n  @Target({METHOD})\n  @Retention(RUNTIME)\n  public @interface ProvidesUnexpandedString {}\n\n  /** Returns an instance with the input expanded string */\n  @Target({METHOD})\n  @Retention(RUNTIME)\n  public @interface ProvidesInstanceWithExpandedString {}\n```\n\nand then in `RelativeSubTask` you would have:\n```\n  @ProvidesUnexpandedString\n  public abstract String value();\n  \n  @ProvidesInstanceWithExpandedString\n  public RelativeSubTask createInstance(String expanded) {\n```\n\nand then in a `getUnexpanded()` method in this class you would do:\n```\n  protected String getUnexpanded(T value) {\n    for (Method method : value.getClass().getMethods()) {\n      if (method.isAnnotationPresent(ProvidesUnexpandedString.class)) {\n        // probably should do a check like:\n        // checkArgument(String.class.isAssignableFrom(method.getReturnType()), ...);\n        // See QueryBuilder.Definition for an example\n        return expandText(method.invoke(value));\n        // since this method.invoke() takes a value object, you should be able\n        // to do it once for each List\u003cT\u003e and use the same method object repeatedly\n      }\n    }\n  }   \n```\n\nand then a similar thing for ProvidesInstanceWithExpandedString.",
      "parentUuid": "260a23e3_6e1ff887",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "05a8fd56_dd689c3d",
        "filename": "src/main/java/com/googlesource/gerrit/plugins/task/properties/AbstractExpander.java",
        "patchSetId": 10
      },
      "lineNbr": 163,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-12-18T14:01:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "d0d39802_80dbbfff",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "cf137bec_8f0737e2",
        "filename": "src/main/resources/Documentation/test/task_states.md",
        "patchSetId": 10
      },
      "lineNbr": 2611,
      "author": {
        "id": 1002666
      },
      "writtenOn": "2023-12-14T18:27:22Z",
      "side": 1,
      "message": "Can you add a `[root \"Root Preload from group ref which has subtask in different group ref\"]`? That adds coverage for referring to a 3rd file, which I don\u0027t think the other tests cover.",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "994dfa8c_13a6b0a2",
        "filename": "src/main/resources/Documentation/test/task_states.md",
        "patchSetId": 10
      },
      "lineNbr": 2611,
      "author": {
        "id": 1096442
      },
      "writtenOn": "2023-12-18T14:01:08Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "cf137bec_8f0737e2",
      "revId": "da8a88fc8e3a15e1dce6d9c8d62f29210b900997",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153"
    }
  ]
}